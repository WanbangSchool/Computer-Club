#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

int main() {
    int t;
    cin >> t;  // 테스트 케이스의 수 입력

    while (t--) {
        int n, k;
        cin >> n >> k;  // 문자열의 길이와 사용할 색상의 수 입력
        string s;
        cin >> s;  // 문자열 입력

        vector<int> freq(26, 0);  // 알파벳 빈도 수를 저장할 배열

        // 각 문자별 빈도 수 계산
        for (char c : s) {
            freq[c - 'a']++;
        }

        // 가능한 짝을 이루는 문자 수와 홀수 문자의 수를 계산
        int pairs = 0, odds = 0;
        for (int f : freq) {
            pairs += f / 2;  // 쌍을 이루는 문자들
            odds += f % 2;   // 홀수 개수의 문자
        }

        // 각 팰린드롬이 가질 수 있는 최대 길이 계산
        // 팰린드롬의 길이는 가능한 쌍으로부터 결정되며,
        // 쌍을 나누어서 k개의 팰린드롬으로 나눌 수 있는 최대 길이 계산
        int result = 2 * (pairs / k);  // 각 팰린드롬에 나눌 수 있는 최대 짝의 길이
        if (2 * (pairs % k) + odds >= k) {
            result++;  // 만약 쌍으로 다 나누고도 홀수 문자가 남는다면, 그 문자를 중간에 넣을 수 있음
        }

        cout << result << endl;  // 결과 출력
    }

    return 0;
}

/*
코드 설명:
입력 받기: 각 테스트 케이스마다 문자열의 길이 n과 색상 k를 입력받습니다.
문자 빈도 수 계산: freq 벡터를 이용하여 각 문자의 빈도수를 계산합니다.
쌍과 홀수 문자 계산: 각 문자에서 짝을 이룰 수 있는 문자 개수(pairs)와 홀수 개수의 문자의 수(odds)를 계산합니다.
팰린드롬 길이 계산: 팰린드롬의 가능한 최대 길이는 pairs / k를 이용하여 계산합니다. 이때 남은 홀수 개수와 쌍으로 나누어지지 않은 문자를 고려하여 팰린드롬 길이를 결정합니다.
결과 출력: 각 테스트 케이스의 결과를 출력합니다.
시간 복잡도:
각 테스트 케이스마다 O(n)의 시간 복잡도를 가집니다.
전체 입력의 크기가 최대 2 * 10^5이므로 이 풀이 방법은 시간 내에 처리 가능합니다.


이 문제는 주어진 문자열에서 최대한 길이가 긴 팰린드롬 문자열을 k개의 색상으로 만들 수 있도록 하는 것입니다. 각 색상마다 문자열을 팰린드롬 형태로 만들고, 그 중에서 가장 짧은 팰린드롬의 길이를 최대화하는 것이 목표입니다.

팰린드롬의 특징:
팰린드롬은 좌우 대칭이므로, 같은 문자들이 쌍을 이루어야 합니다. 따라서 어떤 문자가 홀수 개 존재하면 그 중 하나만 가운데에 위치할 수 있고, 나머지는 짝을 이루어야 합니다.

풀이 방법:
문자 빈도 수 세기: 각 문자들이 몇 개씩 존재하는지 세어야 합니다. 문자가 짝수 개이면 그 문자는 좌우 대칭을 이룰 수 있지만, 홀수 개인 문자는 하나만 가운데에 올 수 있습니다.

k개의 팰린드롬 만들기: 팰린드롬은 좌우 대칭 구조이므로, 최소한 각 색깔마다 대칭을 이룰 수 있도록 문자를 배분해야 합니다. 이를 위해 문자의 쌍을 이루는 부분과 홀수 개를 중간에 위치할 수 있는 문자의 개수를 고려해야 합니다.

결과 계산: 가능한 한 많은 쌍을 이루어야 하고, 그 쌍을 k개의 색상에 나누어 배치합니다. 이때, 각 팰린드롬의 길이를 최대화하려면 가능한 많은 문자를 사용하여 대칭을 이루게 해야 합니다.

예시:
s = bxyaxzay, k = 2
b: 1, x: 2, y: 2, a: 2, z: 1
짝을 이룰 수 있는 문자: 4개 (x, y, a)
두 개의 팰린드롬으로 만들 수 있는 최대 길이는 3입니다.
*/